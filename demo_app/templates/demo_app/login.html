{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-Mobile Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        body {
            background: linear-gradient(135deg, #fff 60%, #fbe4f2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-container {
            background: #fff;
            border-radius: 1.5rem;
            box-shadow: 0 4px 24px rgba(226,0,116,0.10);
            padding: 2.5rem 2.5rem 2rem 2.5rem;
            max-width: 400px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .tmobile-logo {
            display: block;
            margin: 0 auto 1.5rem auto;
            height: 56px;
        }
        .login-title {
            color: #E20074;
            font-weight: 700;
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 2rem;
        }
        .form-label {
            color: #E20074;
            font-weight: 500;
        }
        .btn-tmobile {
            background: #E20074;
            color: #fff;
            font-weight: 600;
            border-radius: 2rem;
            padding: 1rem 0;
            font-size: 1.2rem;
            transition: background 0.2s;
            margin-top: 1rem;
        }
        .btn-tmobile:hover {
            background: #b8005a;
        }
        .form-control:focus {
            border-color: #E20074;
            box-shadow: 0 0 0 0.2rem rgba(226,0,116,.15);
        }
        .error-message {
            color: #d50000;
            text-align: center;
            margin-bottom: 1rem;
            font-weight: 500;
        }
        @media (max-width: 767.98px) {
            .login-container {
                padding: 1.2rem 0.5rem 1rem 0.5rem;
                gap: 1.2rem;
            }
            .btn-tmobile {
                font-size: 1.1rem;
                padding: 1rem 0;
            }
            .form-label {
                font-size: 1rem;
            }
                    .form-control {
            font-size: 1rem;
            padding: 0.75rem 0.75rem;
        }
    }
    
    /* Chatbot Styles */
    .chatbot-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: #E20074;
        color: white;
        border: none;
        border-radius: 50%;
        box-shadow: 0 4px 12px rgba(226,0,116,0.3);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        z-index: 1000;
        transition: all 0.3s ease;
    }
    
    .chatbot-toggle:hover {
        background: #b8005a;
        transform: scale(1.1);
    }
    
    .chatbot-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: min(90vw, 420px);
        height: min(80vh, 640px);
        max-height: calc(100vh - 40px);
        background: white;
        border-radius: 1rem;
        box-shadow: 0 8px 32px rgba(0,0,0,0.15);
        z-index: 2000;
        display: none;
        flex-direction: column;
        overflow: hidden;
        border: 2px solid #E20074;
    }
    
    .chatbot-header {
        background: #E20074;
        color: white;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        z-index: 1002;
        border-radius: 1rem 1rem 0 0;
        min-height: 56px;
    }
    
    .chatbot-title {
        font-weight: bold;
        margin: 0;
    }
    
    .chatbot-close {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        padding: 0;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        z-index: 1001;
    }
    
    .chatbot-close:hover {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
        transform: scale(1.1);
    }
    
    .chatbot-messages {
        flex: 1;
        padding: 1rem;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        min-height: 0;
    }
    
    .message {
        max-width: 80%;
        padding: 0.75rem 1rem;
        border-radius: 1rem;
        word-wrap: break-word;
        line-height: 1.4;
    }
    
    .message.system {
        background: #f8f9fa;
        color: #6c757d;
        align-self: center;
        text-align: center;
        max-width: 90%;
        font-size: 0.9rem;
    }
    
    .message.user {
        background: #E20074;
        color: white;
        align-self: flex-end;
    }
    
    .message.bot {
        background: #e9ecef;
        color: #333;
        align-self: flex-start;
    }
    
    .chatbot-suggestions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
        margin-top: 0.5rem;
    }
    
    .suggestion-chip {
        background: #E20074;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 1rem;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
    }
    
    .suggestion-chip:hover {
        background: #b8005a;
        transform: scale(1.05);
    }
    
    .chatbot-input-area {
        padding: 1rem;
        border-top: 1px solid #e9ecef;
        background: #f8f9fa;
    }
    
    .chatbot-input-group {
        display: flex;
        gap: 0.5rem;
        align-items: flex-end;
    }
    
    .chatbot-input {
        flex: 1;
        border: 1px solid #dee2e6;
        border-radius: 1rem;
        padding: 0.75rem;
        resize: none;
        font-family: inherit;
        font-size: 0.9rem;
        line-height: 1.4;
        max-height: 100px;
        min-height: 40px;
    }
    
    .chatbot-input:focus {
        outline: none;
        border-color: #E20074;
        box-shadow: 0 0 0 0.2rem rgba(226,0,116,.15);
    }
    
    .chatbot-send {
        background: #E20074;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        flex-shrink: 0;
    }
    
    .chatbot-send:hover {
        background: #b8005a;
        transform: scale(1.1);
    }
    
    .chatbot-send:disabled {
        background: #6c757d;
        cursor: not-allowed;
        transform: none;
    }
    </style>
</head>
<body>
    <div class="login-container">
        <img src="{% static 'logo.svg' %}" alt="T-Mobile Logo" class="tmobile-logo">
        <div class="login-title">Sign in to T-Mobile Portal</div>
        {% if error %}
            <div class="error-message">{{ error }}</div>
        {% endif %}
        <form method="post" novalidate>
            {% csrf_token %}
            <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="text" class="form-control" id="username" name="username" required autofocus>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" name="password" required>
            </div>
            <button type="submit" class="btn btn-tmobile w-100">Login</button>
        </form>
    </div>
    
    <!-- Chatbot UI -->
    <button class="chatbot-toggle" id="chatbotToggle">
        ðŸ’¬
    </button>

    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <h6 class="chatbot-title">ABC Limited Assistant</h6>
            <button class="chatbot-close" id="chatbotClose">Ã—</button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message system">
                Welcome! I can help you with your account. Try commands like:
            </div>
            <div class="chatbot-suggestions">
                <span class="suggestion-chip" data-suggestion="login help">Login help</span>
                <span class="suggestion-chip" data-suggestion="account information">Account info</span>
                <span class="suggestion-chip" data-suggestion="password reset">Password reset</span>
                <span class="suggestion-chip" data-suggestion="contact support">Contact support</span>
            </div>
        </div>
        <div class="chatbot-input-area">
            <div class="chatbot-input-group">
                <textarea class="chatbot-input" id="chatbotInput" placeholder="Type your message..." rows="1"></textarea>
                <button class="chatbot-send" id="chatbotSend">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22,2 15,22 11,13 2,9"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Chatbot functionality
        document.addEventListener('DOMContentLoaded', function() {
            const chatbotToggle = document.getElementById('chatbotToggle');
            const chatbotContainer = document.getElementById('chatbotContainer');
            const chatbotClose = document.getElementById('chatbotClose');
            const chatbotInput = document.getElementById('chatbotInput');
            const chatbotSend = document.getElementById('chatbotSend');
            const chatbotMessages = document.getElementById('chatbotMessages');
            const suggestionChips = document.querySelectorAll('.suggestion-chip');
            
            // Toggle chatbot
            chatbotToggle.addEventListener('click', function() {
                chatbotContainer.style.display = 'flex';
                chatbotToggle.style.display = 'none';
                chatbotInput.focus();
            });
            
            // Close chatbot
            chatbotClose.addEventListener('click', function() {
                chatbotContainer.style.display = 'none';
                chatbotToggle.style.display = 'flex';
            });
            
            // Send message
            function sendMessage() {
                const message = chatbotInput.value.trim();
                if (!message) return;
                
                // Add user message
                addMessage(message, 'user');
                chatbotInput.value = '';
                
                // Simulate bot response
                setTimeout(() => {
                    const response = getBotResponse(message);
                    addMessage(response, 'bot');
                }, 500);
            }
            
            // Send button click
            chatbotSend.addEventListener('click', sendMessage);
            
            // Enter key press
            chatbotInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Suggestion chips
            suggestionChips.forEach(chip => {
                chip.addEventListener('click', function() {
                    const suggestion = this.dataset.suggestion;
                    chatbotInput.value = suggestion;
                    sendMessage();
                });
            });
            
            // Add message to chat
            function addMessage(text, type) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}`;
                messageDiv.textContent = text;
                chatbotMessages.appendChild(messageDiv);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            }
            
            // Bot response logic
            function getBotResponse(message) {
                const lowerMessage = message.toLowerCase();
                
                if (lowerMessage.includes('login') || lowerMessage.includes('sign in')) {
                    return "To log in, enter your username and password in the form above. If you're having trouble, you can reset your password or contact support.";
                } else if (lowerMessage.includes('password') || lowerMessage.includes('reset')) {
                    return "For password reset, please contact our support team at support@abclimited.com or call 1-800-ABC-HELP.";
                } else if (lowerMessage.includes('account') || lowerMessage.includes('info')) {
                    return "Once you log in, you'll have access to your account information, billing statements, and line management features.";
                } else if (lowerMessage.includes('support') || lowerMessage.includes('contact') || lowerMessage.includes('help')) {
                    return "Our support team is available 24/7. You can reach us at support@abclimited.com or call 1-800-ABC-HELP.";
                } else {
                    return "I'm here to help with your ABC Limited account. You can ask me about login, password reset, account information, or contact support.";
                }
            }
            
            // Auto-resize textarea
            chatbotInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 100) + 'px';
            });
        });
    </script>
</body>
</html> 